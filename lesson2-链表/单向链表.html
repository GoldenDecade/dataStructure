<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
链表与数组对比: 优缺点
链表结构: 两部分 data + next (类比火车)

<pre>
    <code>
class Node {
	constructor(data) {
		this.data = data
		this.next = null
	}
}

class LinkedList {
	constructor() {
		this.head = null
		this.length = 0
	}
	append(data) {
		// 0. 链表为空
		// 1. 先创建节点
		// 2. 修改 head 指针
		// 0. 链表不为空
		// 1. 先创建节点
		// 2. 找到上一个节点, 更新上一个节点的next
		const node = new Node(data)
		if (this.length === 0) {
			this.head = node
		}else {
			let i  = 0
			let current = this.head
			while (current.next) {
				current = current.next
			}
			current.next = node
		}
		this.length++
	}
	insert(position, data) {
		if (position < 0 || position > this.length) {
			return false
		}
		const node = new Node(data)
		let current = this.head
		if (position === 0) {
			this.head = node
			node.next = current
		}else {
			let index = 0
			while (index < (position - 1)) {
				current = current.next
				index++
			}
			let prev = current
			let next = current.next
			prev.next = node
			node.next = next
		}
		this.length++
		return this
	}
	removeAt(position) {
		let data = this.get(position)
		return data ? this.remove(data) : false
	}
	remove(data) {
		if (this.length < 0) {
			return false
		}
		let current = this.head
		let prev = null
		while(current && (current.data !== data)) {
			prev = current
			current = current.next
		}
		if (!prev) { // 位置 0
			this.head = current.next
		}if (!current) { // 没找到 data
			return false
		}else {
			prev.next = current && current.next
		}
		return data
	}
	update(position, data) {
		if (position < 0 || position >= this.length) {
			return false
		}
		let index = 0
		let current = this.head
		while(index++ < position) {
			current = current.next
		}
		current.data = data
		return this
	}
	get(position) {
		if (position < 0 || position >= this.length) {
			return null
		}
		let index = 0
		let current = this.head
		while(index < position) {
			current = current.next
			index++
		}
		return current.data
	}
	indexOf(data) {
		let index = -1
		let current = this.head
		while(current) {
			if (current.data === data) {
				return index
			}
			current = current.next
			index++
		}
		return -1
	}
	isEmpty() {
		return this.length === 0
	}
	size() {
		return this.length
	}
	toString() {
		let res = ''
		let current = this.head
		while(current) {
			res += current.data + ' '
			current = current.next
		}
		return res
	}
}

let list = new LinkedList()
list.append('a')
list.append('b')
list.append('c')
list.append('d')

console.log(list.size());
console.log(list.indexOf('c'));
console.log(list.toString());
console.log(list.insert(2, 'insert'));
console.log(list.insert(100, 'insert'));
console.log(list.toString());

console.log(list.remove('insert'));
console.log(list.removeAt(1));
console.log(list.toString());
console.log(list.remove('f'));
console.log(list.removeAt(10));

    </code>
</pre>
<script>
	class Node {
		constructor(data) {
			this.data = data
			this.next = null
		}

	}
	class LinkedList {
		constructor() {
			this.head = null
			this.length = 0
		}
		append(data) {
			// 0. 链表为空
			// 1. 先创建节点
			// 2. 修改 head 指针
			// 0. 链表不为空
			// 1. 先创建节点
			// 2. 找到上一个节点, 更新上一个节点的next
			const node = new Node(data)
			if (this.length === 0) {
				this.head = node
			}else {
				let i  = 0
				let current = this.head
				while (current.next) {
					current = current.next
				}
				current.next = node
			}
			this.length++
		}
		insert(position, data) {
			if (position < 0 || position > this.length) {
				return false
			}
			const node = new Node(data)
			let current = this.head
			if (position === 0) {
				this.head = node
				node.next = current
			}else {
				let index = 0
				while (index < (position - 1)) {
					current = current.next
					index++
				}
				let prev = current
				let next = current.next
				prev.next = node
				node.next = next
			}
			this.length++
			return this
		}
		removeAt(position) {
			let data = this.get(position)
			return data ? this.remove(data) : false
		}
		remove(data) {
			if (this.length < 0) {
				return false
			}
			let current = this.head
			let prev = null
			while(current && (current.data !== data)) {
				prev = current
				current = current.next
			}
			if (!prev) { // 位置 0
				this.head = current.next
			}if (!current) { // 没找到 data
				return false
			}else {
				prev.next = current && current.next
			}
			return data
		}
		update(position, data) {
			if (position < 0 || position >= this.length) {
				return false
			}
			let index = 0
			let current = this.head
			while(index++ < position) {
				current = current.next
			}
			current.data = data
			return this
		}
		get(position) {
			if (position < 0 || position >= this.length) {
				return null
			}
			let index = 0
			let current = this.head
			while(index < position) {
				current = current.next
				index++
			}
			return current.data
		}
		indexOf(data) {
			let index = -1
			let current = this.head
			while(current) {
				if (current.data === data) {
					return index
				}
				current = current.next
				index++
			}
			return -1
		}
		isEmpty() {
			return this.length === 0
		}
		size() {
			return this.length
		}
		toString() {
			let res = ''
			let current = this.head
			while(current) {
				res += current.data + ' '
				current = current.next
			}
			return res
		}
	}

	let list = new LinkedList()
	list.append('a')
	list.append('b')
	list.append('c')
	list.append('d')

	console.log(list.size());
	console.log(list.indexOf('c'));
	console.log(list.toString());
	console.log(list.insert(2, 'insert'));
	console.log(list.insert(100, 'insert'));
	console.log(list.toString());

	console.log(list.remove('insert'));
	console.log(list.removeAt(1));
	console.log(list.toString());
	console.log(list.remove('f'));
	console.log(list.removeAt(10));

</script>
</body>
</html>
